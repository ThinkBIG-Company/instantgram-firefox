!function(e){"use strict";(t=a||(a={})).Ad="AD",t.Image="IMAGE",t.Video="VIDEO",t.Carousel="CAROUSEL",t.UNDEFINED="UNDEFINED";var t,a,i={langs:{"en-US":{"helpers.localize_defaultlang":"[instantgram-light] set language: ${LANG_DEFAULT} \n For more information about available languages please check http://thinkbig-company.github.io/instantgram","index@alert_onlyWorks":"Works only on instagram.com","index@profilepage_downloader_disabled":"Sorry the ProfilePage downloader is currently disabled because instagram changed their system.\n\nMaybe in the future there will be a solution to fix the problem.","index@alert_dontFound":"Did you open any Instagram post? Like for example<br/><div style='text-align:center'><a style='color:black' href='https://www.instagram.com/p/CIGrv1VMBkS/' target='_blank'>https://www.instagram.com/p/CIGrv1VMBkS/</a></div>","index#program#modal_settings@title":"Settings","index#program#modal_settings@settings_attention":"Attention: You have to open [instantgram-light] again for your changes to be active!","index#program#modal_settings@settings_checkbox_1":"Enable monetized posts<br>(ad blockers must be disabled)","index#program#modal_settings@settings_checkbox_2":"Stories pause when opening [instantgram-light]","index#program#modal_settings@settings_checkbox_3":"Open download in new tab","index#program#modal_settings@settings_checkbox_4":"Mute stories","index#program#modal_settings@settings_4":"Change the file name format for downloads.<br/>The default format is as follows.","index#program#modal_settings@settings_4_1":"You can omit the above placeholders completely or customize them by adding hyphens, underscores, and periods.","index@download":"Download","index@save":"Save","index@saved":"Saved","index@close":"Close","modules.update@consoleWarnOutdatedInfo":"[instantgram-light] is outdated. Please check http://thinkbig-company.github.io/instantgram for available updates.","modules.update@consoleWarnOutdatedInfoVersions":"[instantgram-light] Installed version: ${data.version} | New update: ${data.onlineVersion}","modules.update@determineIfGetUpdateIsNecessary_contacting":"[instantgram-light] is looking for available updates...","modules.update@determineIfGetUpdateIsNecessary_updated":"[instantgram-light] updated your current version.","modules.update@determineIfGetUpdateIsNecessary_@update_available":"There is a new update available","modules.update@determineIfGetUpdateIsNecessary_@load_update":"Get update",ad:"Sponsored"},"de-DE":{"helpers.localize_defaultlang":"Ausgew\xe4hlte Sprache: ${LANG_DEFAULT} \n Weitere Informationen zu den unterst\xfctzten Sprachen findest du auf http://thinkbig-company.github.io/instantgram","index@alert_onlyWorks":"Funktioniert nur auf instagram.com","index@profilepage_downloader_disabled":"Leider ist der ProfilePage-Downloader derzeit deaktiviert, da Instagram sein System ge\xe4ndert hat.\n\nVielleicht gibt es in Zukunft eine L\xf6sung f\xfcr dieses Problem.","index@alert_dontFound":"Hast du einen Instagram Post ge\xf6ffnet? Zum Beispiel<br/><div style='text-align:center'><a style='color:black' href='https://www.instagram.com/p/CIGrv1VMBkS/' target='_blank'>https://www.instagram.com/p/CIGrv1VMBkS/</a></div>","index#program#modal_settings@title":"Einstellungen","index#program#modal_settings@settings_attention":"Achtung: Sie m\xfcssen diese App erneut \xf6ffnen, damit ihre \xc4nderungen \xfcbernommen werden!","index#program#modal_settings@settings_general_title_1":"Monetarisierte Beitr\xe4ge aktivieren","index#program#modal_settings@settings_general_description_1":"Werbeblocker m\xfcssen deaktiviert sein","index#program#modal_settings@settings_general_title_2":"Download in neuem Tab \xf6ffnen","index#program#modal_settings@settings_general_description_2":"Der Download wird in einem neuen Tab ge\xf6ffnet","index#program#modal_settings@settings_general_title_3":"Slideshow ein/ausschalten","index#program#modal_settings@settings_general_description_3":"Aktivieren oder deaktivieren Sie die automatische Slideshow","index#program#modal_settings@settings_general_title_4":"Dateinamenformat f\xfcr Downloads \xe4ndern","index#program#modal_settings@settings_general_description_4":"\xc4ndere hier das Dateinamenformat f\xfcr die Downloads<br/>Das Standardformat ist<br>{Username}__{Year}-{Month}-{Day}--{Hour}-{Minute}","index#program#modal_settings@settings_stories_title_1":"Stories stummschalten","index#program#modal_settings@settings_stories_description_1":"Beim \xf6ffnen werden Stories stummgeschaltet","index#program#modal_settings@settings_stories_title_2":"Stories beim \xf6ffnen pausieren","index#program#modal_settings@settings_stories_description_2":"Beim \xf6ffnen werden Stories pausiert","index#program#modal_settings@settings_stories_title_3":"Stories einzeln anzeigen","index#program#modal_settings@settings_stories_description_3":"Beim \xf6ffnen werden Stories einzeln angezeigt","index@download":"Download","index@save":"Speichern","index@saved":"Gespeichert","index@close":"Schlie\xdfen","modules.update@consoleWarnOutdatedInfo":"[instantgram-light] ist veraltet. Bitte besuche die Seite http://thinkbig-company.github.io/instantgram f\xfcr ein Update.","modules.update@consoleWarnOutdatedInfoVersions":"[instantgram-light] Installierte Version: ${data.version} | Neue Version: ${data.onlineVersion}","modules.update@determineIfGetUpdateIsNecessary_contacting":"[instantgram-light] sucht nach neuen verf\xfcgbaren Updates...","modules.update@determineIfGetUpdateIsNecessary_updated":"[instantgram-light] wurde aktualisiert.","modules.update@determineIfGetUpdateIsNecessary_@update_available":"Es ist ein neues Update verf\xfcgbar","modules.update@determineIfGetUpdateIsNecessary_@load_update":"Update laden",ad:"Anzeige"},"es-AR":{"helpers.localize_defaultlang":"[instantgram-light] establecer idioma: ${LANG_DEFAULT} \n Para m\xe1s informaci\xf3n sobre los idiomas disponibles, consulte http://thinkbig-company.github.io/instantgram","index@alert_onlyWorks":"S\xf3lo funciona en instagram.com","index@profilepage_downloader_disabled":"Lo siento, la descarga de ProfilePage est\xe1 deshabilitada actualmente porque Instagram cambi\xf3 su sistema.\n\nTal vez en el futuro haya una soluci\xf3n para solucionar el problema.","index@alert_dontFound":"\xbfHas abierto alg\xfan post de Instagram? Como por ejemplo<br/><div style='text-align:center'><a style='color:black' href='https://www.instagram.com/p/CIGrv1VMBkS/' target='_blank'>https://www.instagram.com/p/CIGrv1VMBkS/</a></div>","index#program#modal_settings@title":"Ajustes","index#program#modal_settings@settings_attention":"Atenci\xf3n: \xa1Tienes que abrir [instantgram-light] nuevamente para que los cambios est\xe9n activos!","index#program#modal_settings@settings_checkbox_1":"Habilitar publicaciones monetizadas<br>(los bloqueadores de anuncios deben estar deshabilitados)","index#program#modal_settings@settings_checkbox_2":"Historias en pausa al abrir [instantgram-light]","index#program#modal_settings@settings_checkbox_3":"Abrir la descarga en una nueva pesta\xf1a","index#program#modal_settings@settings_4":"Cambie el formato del nombre de archivo para las descargas.<br/>El formato predeterminado es el siguiente","index#program#modal_settings@settings_4_1":"Puede omitir por completo los marcadores de posici\xf3n anteriores o personalizarlos agregando guiones, guiones bajos y puntos.","index@download":"Descargar","index@save":"Ahorrar","index@saved":"Salvado","index@close":"Cerca","modules.update@consoleWarnOutdatedInfo":"[instantgram-light] es obsoleto. Consulte en http://thinkbig-company.github.io/instantgram las actualizaciones disponibles.","modules.update@consoleWarnOutdatedInfoVersions":"[instantgram-light] Versi\xf3n instalada: ${data.version} | Nueva actualizaci\xf3n: ${data.onlineVersion}","modules.update@determineIfGetUpdateIsNecessary_contacting":"[instantgram-light] est\xe1 buscando actualizaciones disponibles...","modules.update@determineIfGetUpdateIsNecessary_updated":"[instantgram-light] ha actualizado su versi\xf3n actual.","modules.update@determineIfGetUpdateIsNecessary_@update_available":"Hay una nueva actualizaci\xf3n disponible","modules.update@determineIfGetUpdateIsNecessary_@load_update":"Obtener informaci\xf3n",ad:"Publicidad"},"pt-BR":{"helpers.localize_defaultlang":"[instantgram-light] idioma configurado: ${LANG_DEFAULT} \npara mais informa\xe7\xf5es sobre os idiomas suportados, acesse http://thinkbig-company.github.io/instantgram","index@alert_onlyWorks":"[instantgram-light] somente funciona no instagram.com","index@profilepage_downloader_disabled":"Lamentamos que o programa de download ProfilePage esteja atualmente desativado porque o programa mudou seu sistema.\n\nTalvez, no futuro, haja uma solu\xe7\xe3o para resolver o problema.","index@alert_dontFound":"ops, voc\xea est\xe1 em algum post do instagram? ex:<br/><div style='text-align:center'><a style='color:black' href='https://www.instagram.com/p/CIGrv1VMBkS/' target='_blank'>https://www.instagram.com/p/CIGrv1VMBkS/</a></div>","index#program#modal_settings@title":"Configura\xe7\xf5es","index#program#modal_settings@settings_attention":"Aten\xe7\xe3o: Voc\xea precisa abrir o [instantgram-light] novamente para que suas altera\xe7\xf5es sejam ativadas!","index#program#modal_settings@settings_checkbox_1":"Habilitar postagens monetizadas<br>(os bloqueadores de an\xfancios devem estar desativados)","index#program#modal_settings@settings_checkbox_2":"As hist\xf3rias fazem uma pausa ao abrir [instantgram-light]","index#program#modal_settings@settings_checkbox_3":"Abrir o download em uma nova guia","index#program#modal_settings@settings_4":"Altere o formato do nome do arquivo para downloads.<br/>O formato padr\xe3o \xe9 o seguinte","index#program#modal_settings@settings_4_1":"Voc\xea pode omitir completamente os espa\xe7os reservados acima ou ajust\xe1-los adicionando h\xedfens, sublinhados e pontos.","index@download":"Download","index@save":"Salvar","index@saved":"Salvo em","index@close":"Fechar","modules.update@consoleWarnOutdatedInfo":"[instantgram-light] est\xe1 desatualizado. Acesse http://thinkbig-company.github.io/instantgram para atualizar","modules.update@consoleWarnOutdatedInfoVersions":"[instantgram-light] vers\xe3o local: ${data.version} | nova vers\xe3o: ${data.onlineVersion}","modules.update@determineIfGetUpdateIsNecessary_contacting":"[instantgram-light] est\xe1 procurando atualiza\xe7\xf5es...","modules.update@determineIfGetUpdateIsNecessary_updated":"[instantgram-light] informa\xe7\xf5es locais atualizadas","modules.update@determineIfGetUpdateIsNecessary_@update_available":"H\xe1 uma nova atualiza\xe7\xe3o dispon\xedvel","modules.update@determineIfGetUpdateIsNecessary_@load_update":"Carga de actualiza\xe7\xe3o",ad:"Patrocinado"}}};let n=navigator.language;-1!==n.indexOf("-")&&(n=n.split("-")[0]),-1!==n.indexOf("_")&&(n=n.split("_")[0]);let r={de:"de-DE",en:"en-US",es:"es-AR",pt:"pt-BR"}[n];function o(e,t=r){try{if(Object.prototype.hasOwnProperty.call(i.langs,t)||(t="en-US"),i.langs[t][e])return i.langs[t][e];return""}catch(a){return console.error(`[${$.NAME}]LOC error:`,a),`ops, an error ocurred in localization system. Enter in https://github.com/ThinkBIG-Company/${$.NAME}/issues/new and open an issue with this code: "LOC_dont_found_str_neither_default:[${t}->${e}]"
    for more information open the console`}}console.info(o("helpers.localize_defaultlang").replace("${LANG_DEFAULT}",r));let s=new Map;function l(e){let t=window.location.pathname,a=t.split("/"),i={"/reel/":()=>a[2],"/reels/":()=>a[2],"/stories/":()=>a[3]};for(let e in i)if(t.startsWith(e))return i[e]();let n=/^\/p\/([^/]+)\//;for(let t of Array.from(e.querySelectorAll("a[href]"))){let e=t.getAttribute("href").match(n);if(e)return e[1]}return null}async function d(e){let t=window.location.href.match(/www.instagram.com\/stories\/[^/]+\/(\d+)/);if(t)return t[1];if(!s.has(e)){let t=`https://www.instagram.com/p/${e}/`,a=await fetch(t),i=(await a.text()).match(/instagram:\/\/media\?id=(\d+)|["' ]media_id["' ]:["' ](\d+)["' ]/);if(!i){let e=await fetch(t+"?__a=1&__d=dis");if(!(i=(await e.text()).match(/"pk":(\d+)/)))return null}let n=null;for(let e=0;e<i.length;++e)i[e]&&(n=i[e]);if(!n)return null;s.set(e,n)}return s.get(e)}async function m(e){let t,a;let{type:i,articleNode:n,id:r,userName:o,userId:s}=e,m=function(){let e=/"X-IG-App-ID":"([\d]+)"/,t=document.querySelectorAll("body > script");for(let a=0;a<t.length;++a){let i=t[a].text.match(e);if(i)return i[1]}return null}();if(!m)return console.log(`${i}() Cannot find appId`),null;switch(i){case"getReelsMediaFromFeed":if(!(a=r||await d(l(n))))return console.log(`${i}() Cannot find media id`),null;t=`https://i.instagram.com/api/v1/feed/reels_media/?reel_ids=${r?"":"highlight%3A"}${a}`;break;case"getMediaFromInfo":if(!(a=await d(l(n))))return console.log(`${i}() Cannot find media id`),null;t=`https://i.instagram.com/api/v1/media/${a}/info/`;break;case"getUserFromInfo":t=`https://i.instagram.com/api/v1/users/${s}/info/`;break;case"getUserInfoFromWebProfile":t=`https://i.instagram.com/api/v1/users/web_profile_info/?username=${o}`;break;default:return console.log("Unsupported type of API request"),null}return b(t,m)}async function c(e,t){let a=l(e),i=u(window.location.href),n=null;console.log("generateModalBody() postId",a,"userName",i);let r=window.location.pathname.startsWith("/stories/")?(await m({type:"getUserInfoFromWebProfile",userName:i})).data.user.id:null,o=await h(e,a,r);if(!o)return null;console.log("generateModalBody() mediaInfo",o),console.log("userName == postId",i==a);let s=e=>window.location.pathname.startsWith(e);if(i===a&&(s("/p/")||s("/reels/")))o.items&&o.items[0]&&o.items[0].user&&(i=o.items[0].user.username,n=x("https://www.instagram.com",window.location.pathname,i));else{let e=o.reels_media&&o.reels_media[0]&&o.reels_media[0].user&&s("/stories/"),t=o.items&&o.items[0]&&o.items[0].user;(e||t)&&(i=e?o.reels_media[0].user.username:o.items[0].user.username,n=x("https://www.instagram.com",window.location.pathname,i)),console.log("userName",i)}return await g(e,o,i,n,t)}async function g(e,t,i,n,r){var s;let l,d="",m={showAds:"true"===localStorage.getItem(`${r.STORAGE_NAME}_settings_general_1`),openInNewTab:"true"===localStorage.getItem(`${r.STORAGE_NAME}_settings_general_2`),autoSlideshow:"true"===localStorage.getItem(`${r.STORAGE_NAME}_settings_general_3`),formattedFilenameInput:localStorage.getItem(`${r.STORAGE_NAME}_settings_general_4`)||"{Username}__{Year}-{Month}-{Day}--{Hour}-{Minute}",mutedStories:"true"===localStorage.getItem(`${r.STORAGE_NAME}_settings_stories_1`),noMultiStories:"true"===localStorage.getItem(`${r.STORAGE_NAME}_settings_stories_3`)},c=(e,t)=>{var n,s,l;let c,g;if(console.log("GOOO"),e&&e.width&&e.height&&e.url)c=e.url,g="profile_pic.jpg";else{let{formattedFilename:a,url:n}=function(e,t,a,i){let n=new Date(1e3*e.taken_at),r=function(e,t){for(let a in t){let i=RegExp(`{${a}}`,"g");e=e.replace(i,t[a])}return e=(e=e.replace(/\s+/g,"-")).replace(/[^\w-.]/g,"")}(a,{Minute:n.getMinutes().toString().padStart(2,"0"),Hour:n.getHours().toString().padStart(2,"0"),Day:n.getDate().toString().padStart(2,"0"),Month:(n.getMonth()+1).toString().padStart(2,"0"),Year:n.getFullYear().toString(),Username:t}),{extension:o,url:s}=e.items?"video_versions"in e?{extension:"mp4",url:e.items[0].video_versions[0].url}:{extension:"jpg",url:e.items[0].image_versions2.candidates[0].url}:"video_versions"in e?{extension:"mp4",url:e.video_versions[0].url}:{extension:"jpg",url:e.image_versions2.candidates[0].url};return{formattedFilename:r+"_"+Number(i+1)+"."+o,url:s}}(e,i,m.formattedFilenameInput,t);c=n,g=a}let p=(n=void 0!==e.carousel_media?a.Carousel:void 0!==e.video_dash_manifest?a.Video:a.Image,s=c,l=m.mutedStories,n===a.Video?`<video style="background:black;" height="450" src="${s}" controls preload="metadata"${l?" muted":""}></video>`:`<img src="${s}" />`),u=`https://instantgram.1337.pictures/download.php?data=${btoa(c)}:${btoa(g)}`,h=m.openInNewTab?c:u;d+=`<div class="slide">${p}<a href="${h}" style="width:inherit;font-size:20px;font-weight:600;margin-top:-4px;" ${m.openInNewTab?'target="_blank" rel="noopener noreferrer"':""} class="${r.NAME}-modal-db">${o("index@download")}</a></div>`},g=0;m.noMultiStories&&t.reels_media&&t.reels_media.length>0&&t.reels_media[0].items.length>0?(g=f(e),c(t.reels_media[0].items[g],g)):(console.log("processMediaInfo() mediaInfo",t),l=0,t.reels_media&&t.reels_media.length>0&&t.reels_media[0].items?(t.reels_media[0].items.forEach(c),l=t.reels_media[0].items.length):t.items&&t.items.length>0&&t.items[0].carousel_media?(t.items[0].carousel_media.forEach(c),l=t.items[0].carousel_media.length):t.items&&t.items.length>0?(c(t.items[0],0),l=1):t&&t.user.hd_profile_pic_url_info.url&&(c(t.user.hd_profile_pic_url_info,0),l=1),g=l);let p=(s=d,`<div class="slider-container"><div class="slider">${s}</div><div class="slider-controls"></div></div>`),u=g>0?f(e):0;return{found:!0,mediaType:a.UNDEFINED,mediaInfo:t,modalBody:p,selectedSliderIndex:u,userName:i,userLink:n}}function p(e){if(!e||!e.getBoundingClientRect)return 0;let{top:t,bottom:a}=e.getBoundingClientRect(),i=window.scrollY||document.documentElement.scrollTop,n=i+window.innerHeight,r=t+window.scrollY,o=a+window.scrollY;return i>o||n<r?0:Math.round((Math.min(n,o)-Math.max(i,r))/(a-t)*100)}function u(e){let t=e.match(/https:\/\/www\.instagram\.com\/(stories\/|reels\/|p\/)?([^/?]+)/);return t&&t.length>2?t[2]:null}async function h(e,t,a){return t?window.location.pathname.startsWith("/stories/highlights/")?await m({type:"getReelsMediaFromFeed",articleNode:e,id:null}):window.location.pathname.startsWith("/stories/")?await m({type:"getReelsMediaFromFeed",articleNode:e,id:a}):await m({type:"getMediaFromInfo",articleNode:e}):await m({type:"getReelsMediaFromFeed",articleNode:e,id:a})}function f(e){let t;if(!e)return 0;for(let a of[".x1ned7t2.x78zum5","section header div","section > div header > div","section > div > div > div > div > div > div > div > div","div > div > div > div > div > div > div > div"])if(t=e.querySelector(a))break;let a=t?Array.from(t.children):[];for(let e=0;e<a.length;e++)for(let t of Array.from(a[e].querySelectorAll("div"))){let a=t.style.width,i=t.style.transform;if(a&&"100%"!==a||i&&""!==i.trim())return e}return 0}async function b(e,t){try{let a=await fetch(e,{method:"GET",headers:{Accept:"*/*","X-IG-App-ID":t},credentials:"include",mode:"cors"});if(console.log("response",a),200!==a.status)return console.log(`Fetch API failed with status code: ${a.status}`),null;return await a.json()}catch(e){return console.log(`Error fetching data: ${e}
${e.stack}`),null}}function x(e,t,a){return t.startsWith("/p/")||t.startsWith("/stories/")?`${e}/${a}/`:t.startsWith("/reels/")?`${e}/${a}/reels/`:null}class _{constructor(e){if(this.modal=null,this.imageURL=e.imageURL||"",this.heading=e.heading||[""],this.headingStyle=e.headingStyle||"",this.body=e.body||[""],this.bodyStyle=e.bodyStyle||"",this.buttonList=e.buttonList||[],this.callback=e.callback||null,null==document.getElementById($.NAME+"-modal")){let e=document.createElement("style");e.id=$.NAME+"-modal",e.innerHTML='.instantgram-light-modal-footer button,.instantgram-light-modal-header h5{font-family:"Open Sans","Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:16px!important}.instantgram-light-modal-overlay{display:none!important;opacity:0!important;transition:.1s!important;position:fixed!important;top:0!important;left:0!important;right:0!important;bottom:0!important;z-index:1000!important;background:rgba(0,0,0,.65)!important;justify-content:center!important;align-items:center!important}.instantgram-light-modal{transition:width .1s ease-in-out!important;display:inline-block!important;width:400px!important;padding:1.6px!important;z-index:1001!important}.instantgram-light-modal select{margin-left:.8px!important;border:1px solid #dbdbdb!important;border-radius:3px!important;color:#262626!important;outline:0!important;padding:3px!important;text-align:center!important}@media (min-width:736px){.instantgram-light-modal{width:500px!important}}.instantgram-light-modal-content{position:relative;display:flex;flex-direction:column;width:100%!important;pointer-events:auto!important;background-clip:padding-box!important;outline:0!important}.instantgram-light-modal-header{color:#fff!important;background-color:#fd1d1d!important;background-image:linear-gradient(45deg,#405de6,#5851db,#833ab4,#c13584,#e1306c,#fd1d1d)!important;border-top-left-radius:12px!important;border-top-right-radius:12px!important;padding:0 16px!important;text-align:center}.instantgram-light-modal-header h5:nth-child(2){margin-top:-15px!important;margin-bottom:20px!important}.instantgram-light-modal-body{background:#fff!important;color:#000!important;position:relative!important;-webkit-box-flex:1!important;-ms-flex:1 1 auto!important;flex:1 1 auto!important}.instantgram-light-modal-body>img{background:#000;object-fit:scale-down}.instantgram-light-modal-footer{background-color:#fff!important;border-top:1px solid #dbdbdb!important;border-left:0!important;border-right:0!important;border-bottom-left-radius:12px!important;border-bottom-right-radius:12px!important;line-height:1.5!important;min-height:48px!important;padding:4px 8px!important;user-select:none!important;display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center!important;-ms-flex-align:center!important;align-items:center!important;-webkit-box-pack:end!important;-ms-flex-pack:end!important;justify-content:center!important}.instantgram-light-modal-footer button{width:100%!important;min-height:39px!important;background-color:transparent!important;border:0!important;outline:0!important;cursor:pointer!important}.instantgram-light-modal-footer button.active{color:#0095e2!important}.instantgram-light-modal-show{opacity:1!important}.instantgram-light-modal-visible{display:flex!important}#instantgram-light-bulk-download-indicator{text-align:center!important}.instantgram-light-modal-db{color:#fff!important;background:linear-gradient(45deg,#405de6,#5851db,#833ab4,#c13584,#e1306c,#fd1d1d)!important;display:block;padding:.8rem;width:100%;border:none;cursor:pointer}.instantgram-light-modal-db:focus{outline:0;background:linear-gradient(45deg,rgba(64,93,230,.5),rgba(88,81,219,.5),rgba(131,58,180,.5),rgba(193,53,132,.5),rgba(225,48,108,.5),rgba(253,29,29,.5))!important}.instantgram-light-modal-header h5{color:#fff!important;margin:revert!important;display:flex;justify-content:center;align-items:center}.header-text-left{margin-right:auto}.header-text-right{margin-left:auto}.header-text-middle{margin:0}.header-text-middle a{color:#fff!important}.header-text-right:last-child{margin-right:30px}.instantgram-light-settings{cursor:pointer;display:inline-block;color:rgba(255,255,255,.7);background-color:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.2);border-radius:.3rem;transition:color .2s,background-color .2s,border-color .2s;width:40px;height:40px;top:16px;right:16px;position:absolute}.instantgram-light-settings:hover{color:rgba(255,255,255,.8);text-decoration:none;background-color:rgba(255,255,255,.2);border-color:rgba(255,255,255,.3)}.instantgram-light-modal-body input{color:#000!important}',document.head.appendChild(e)}}get element(){return this.modal}createModal(){let e=document.createElement("div");e.classList.add($.NAME+"-modal-overlay");let t=document.createElement("div");t.classList.add($.NAME+"-modal"),e.appendChild(t);let a=document.createElement("div");a.classList.add($.NAME+"-modal-content"),t.appendChild(a);let i=document.createElement("div");i.classList.add($.NAME+"-modal-header"),this.headingStyle.length>0&&i.setAttribute("style",this.headingStyle),a.appendChild(i),this.heading.forEach(e=>{if("string"!=typeof e||/<\/?[a-z][\s\S]*>/i.test(e)){if(/<\/?[a-z][\s\S]*>/i.test(e)){let t;let a=document.createElement("div"),n=document.createDocumentFragment();for(a.innerHTML=e;null!==(t=a.firstChild);)n.appendChild(t);i.appendChild(n)}else i.appendChild(e)}else{let t=document.createElement("h5");t.innerHTML=e,i.appendChild(t)}});let n=document.createElement("div");if(n.classList.add($.NAME+"-modal-body"),this.bodyStyle.length>0&&n.setAttribute("style",this.bodyStyle),a.appendChild(n),this.imageURL.length>0){let e=document.createElement("div");a.appendChild(e);let t=document.createElement("img");t.setAttribute("height","76px"),t.setAttribute("width","76px"),t.style.margin="auto",t.style.paddingBottom="20px",t.setAttribute("src",this.imageURL),e.appendChild(t)}if(this.body.forEach(e=>{if("string"!=typeof e||/<\/?[a-z][\s\S]*>/i.test(e)){if(/<\/?[a-z][\s\S]*>/i.test(e)){let t;let a=document.createElement("div"),i=document.createDocumentFragment();for(a.innerHTML=e;null!==(t=a.firstChild);)i.appendChild(t);n.appendChild(i)}else n.appendChild(e)}else{let t=document.createElement("p");t.innerText=e,n.appendChild(t)}}),this.buttonList.length>0){let e=document.createElement("div");e.classList.add($.NAME+"-modal-footer"),a.appendChild(e),this.buttonList.forEach(t=>{let a=document.createElement("button");a.classList.add($.NAME+"-modal-button"),a.innerText=t.text,t.active&&a.classList.add("active"),a.onclick=()=>{t&&t.callback&&t.callback(),this.close.bind(this)()},e.appendChild(a)})}else a.style.paddingBottom="4px;";return e}async open(){this.modal&&await this.close(),this.modal=this.createModal(),document.body.appendChild(this.modal),this.modal.classList.add($.NAME+"-modal-visible"),setTimeout(()=>{this.modal.classList.add($.NAME+"-modal-show")}),this.callback&&this.callback(this,this.modal)}async close(){this.modal&&(this.modal.classList.remove($.NAME+"-modal-show"),await new Promise(function(e){setTimeout(e,100)}),this.modal.classList.remove($.NAME+"-modal-visible"),this.modal.parentNode.removeChild(this.modal),this.modal=null)}async refresh(){this.modal&&(this.modal.parentNode.removeChild(this.modal),this.modal=null),await this.open(),this.callback&&this.callback(this,this.modal.querySelector("."+$.NAME+"-modal-body"))}}class y{getName(){return"FeedScanner"}collectMediaElementsInfo(e){return Array.from(e).map((e,t)=>({i1:t,mediaEl:e,elemVisiblePercentage:p(e)||0}))}async execute(e){try{let t=document.getElementsByTagName("article");if(0===t.length)return{found:!1,errorMessage:"No target found."};let a=this.collectMediaElementsInfo(t).reduce((e,t)=>e.elemVisiblePercentage>t.elemVisiblePercentage?e:t),i=t[a.i1];if(!i||i.getBoundingClientRect().height<40)return{found:!1,errorMessage:"Article not found or too small, likely an ad"};return await c(i,e)}catch(t){return console.error(`[${e.NAME}] ${e.VERSION}`,this.getName()+"()",t),{found:!1,errorMessage:t.message,error:t}}}}class v{getName(){return"PostAndReelScanner"}getArticleElement(){return document.querySelector("div[role='dialog'] article")||document.querySelector("section main > div > :first-child > :first-child")}async execute(e){try{let t=this.getArticleElement();if(!t)return{found:!1,errorMessage:"No target found."};return await c(t,e)}catch(t){return console.error(`[${e.NAME}] ${e.VERSION}`,this.getName()+"()",t),{found:!1,errorMessage:t.message,error:t}}}}class w{getName(){return"ProfileScanner"}async handleProfilePage(e){let t=u(window.location.href);if(!t)return console.error("handleProfilePage() Error: Invalid username extracted from URL"),{found:!1,errorMessage:"Invalid username extracted from URL"};try{let a=await m({type:"getUserInfoFromWebProfile",userName:t});if(!a.data.user.id)return{found:!1,errorMessage:"No userID found in userInfo"};let i=a.data.user.id,n=await m({type:"getUserFromInfo",userId:i});if(n&&n.user.hd_profile_pic_url_info.url)return await g(null,n,t,window.location.href,e);return{found:!1,errorMessage:"Incomplete userDetails received"}}catch(e){return console.error("Error fetching user details:",e),{found:!1,userName:t,errorMessage:e.message,error:e}}}async execute(e){if(console.log("Executing ProfileScanner"),!e.regexProfilePath.test(window.location.pathname))return{found:!1,errorMessage:"Path does not match profile path regex, exiting."};try{let t=await this.handleProfilePage(e);if(!t)return{found:!1,errorMessage:"No result from handleProfilePage, returning null."};return t}catch(t){return console.error(`[${e.NAME}] ${e.VERSION}`,this.getName()+"()",t),{found:!1,errorMessage:t.message,error:t}}}}class S{getName(){return"ReelsScanner"}getRelevantArticles(){return Array.from(document.querySelectorAll("section > main > div > div")).filter(e=>e.children.length>0)}findMostRelevantArticle(e){if(0===e.length)return null;let t=e.map((e,t)=>({index:t,article:e,visibility:p(e)})).reduce((e,t)=>e.visibility>t.visibility?e:t,{index:-1,visibility:0});return t.visibility>0?e[t.index]:null}async execute(e){try{let t=this.getRelevantArticles(),a=this.findMostRelevantArticle(t);if(!a)return{found:!1,errorMessage:"No target found."};return await c(a,e)}catch(t){return console.error(`[${e.NAME}] ${e.VERSION}`,this.getName()+"()",t),{found:!1,errorMessage:t.message,error:t}}}}class k{getName(){return"StoriesScanner"}pausePlayCurrentStory(e){let t=Array.from(e.querySelectorAll("path")).find(e=>"M15 1c-3.3 0-6 1.3-6 3v40c0 1.7 2.7 3 6 3s6-1.3 6-3V4c0-1.7-2.7-3-6-3zm18 0c-3.3 0-6 1.3-6 3v40c0 1.7 2.7 3 6 3s6-1.3 6-3V4c0-1.7-2.7-3-6-3z"===e.getAttribute("d"));if(t){let e=t.closest('div[role="button"]');e?.click()}}findVisibleStory(e){let t=Array.from(e.querySelectorAll("section"));return t.find(e=>p(e))?.querySelector("div > div")}findFirstVisibleDiv(e){return Array.from(e.getElementsByTagName("div")).find(e=>e.offsetWidth>0&&e.offsetHeight>0)}shouldPauseStory(e){return"true"===localStorage.getItem(e.STORAGE_NAME+"_settings_stories_2")}async handleHighlights(e,t){let a=this.findVisibleStory(e);return a?(this.shouldPauseStory(t)&&this.pausePlayCurrentStory(a),c(a,t)):null}async handleFeedStories(e,t){let a=this.findFirstVisibleDiv(e);return a?(this.shouldPauseStory(t)&&this.pausePlayCurrentStory(a),c(a,t)):null}async execute(e){try{let t=document.querySelector("body > div:nth-child(5)");if(!t)return{found:!1,errorMessage:"No target found."};let a=window.location.pathname;if(a.startsWith("/stories/highlights/"))return await this.handleHighlights(t,e);if(a.startsWith("/stories/"))return await this.handleFeedStories(t,e);return{found:!1,errorMessage:"No target found."}}catch(t){return console.error(`[${e.NAME}] ${e.VERSION}`,this.getName()+"()",t),{found:!1,errorMessage:t.message,error:t}}}}class E{getName(){return"MediaScanner"}initModalSettingsListeners(e,t){let a=document.querySelectorAll("div.nav-tabs > button.nav-link"),i=document.querySelectorAll(".tab-pane"),n=e=>{e.preventDefault(),a.forEach(e=>e.classList.remove("active")),i.forEach(e=>e.classList.remove("show","active"));let t=e.currentTarget;t.classList.add("active");let n=t.getAttribute("data-target");if(n){let e=document.querySelector(n);e&&e.classList.add("show","active")}};a.forEach(e=>{e.addEventListener("click",n)}),Array.from(e.querySelectorAll('label.slideon input[type="checkbox"]')).forEach(e=>{let a=`${t.STORAGE_NAME}_${e.id.replace(/-/g,"_")}`;console.log(a),e.checked="true"===localStorage.getItem(a),e.addEventListener("change",()=>{localStorage.setItem(a,String(e.checked))})});let r=e.querySelector("#settings-general-4");if(r){let a=`${t.STORAGE_NAME}_settings_general_3`;r.value=localStorage.getItem(a)||"{Username}__{Year}-{Month}-{Day}--{Hour}-{Minute}";let i=e.querySelector("#settings-general-btn-4");i.addEventListener("click",e=>{e.preventDefault(),localStorage.setItem(a,r.value),this.updateInputButtonStyle(i,"index@saved","btn-primary","btn-success"),setTimeout(()=>{this.updateInputButtonStyle(i,"index@save","btn-success","btn-primary")},1e3)})}}initializeStyles(e){this.removeStyleTagsWithIDs([e.NAME+"-cssGeneral",e.NAME+"-cssSlideOn",e.NAME+"-cssCarouselSlider"]),this.appendStyles(e.NAME+"-cssGeneral",".btn,label{display:inline-block}.btn,.form-control{padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5}.alert,p{margin-bottom:1rem}@keyframes horizontal-shaking{0%,100%{transform:translateX(0)}25%,75%{transform:translateX(5px)}50%{transform:translateX(-5px)}}.btn{color:#212529;text-align:center;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control,.form-group{display:block;width:100%}.btn:hover{color:#212529;text-decoration:none}.btn:not(:disabled):not(.disabled){cursor:pointer}.btn-primary{color:#fff!important;background-color:#007bff!important;border-color:#007bff!important}.btn-primary:hover{color:#fff!important;background-color:#0069d9!important;border-color:#0062cc!important}.btn-primary:not(:disabled):not(.disabled).active,.btn-primary:not(:disabled):not(.disabled):active,.show>.btn-primary.dropdown-toggle{color:#fff;background-color:#0062cc;border-color:#005cbf}.btn-primary:not(:disabled):not(.disabled).active:focus,.btn-primary:not(:disabled):not(.disabled):active:focus,.show>.btn-primary.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-success{color:#fff!important;background-color:#28a745!important;border-color:#28a745!important}.mt-1,.my-1{margin-top:.25rem!important}.mt-2,.my-2{margin-top:.5rem!important}.mt-3,.my-3{margin-top:1rem!important}.w94{width:94%!important}.ml-15,.mr-15{margin-left:15px!important}label{margin-bottom:.5rem}.form-control{height:calc(1.5em + .75rem + 2px);color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.alert{position:relative;padding:.75rem 1.25rem;border:1px solid transparent;border-radius:.25rem}.alert-warning{color:#856404;background-color:#fff3cd;border-color:#ffeeba}.pr-0{padding-right:0!important}.col,.col-12,.col-auto{max-width:100%}.instantgram-light-modal-body *{box-sizing:border-box}b,strong{font-weight:bolder}button,input{overflow:visible}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-auto,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-auto,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-auto,.col-sm,.col-sm-1,.col-sm-10,.col-sm-11,.col-sm-12,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-auto,.col-xl,.col-xl-1,.col-xl-10,.col-xl-11,.col-xl-12,.col-xl-2,.col-xl-3,.col-xl-4,.col-xl-5,.col-xl-6,.col-xl-7,.col-xl-8,.col-xl-9,.col-xl-auto{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;min-width:0}.col-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto}.col-12{-ms-flex:0 0 100%;flex:0 0 100%}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width:576px){.container{max-width:540px}}@media (min-width:768px){.container{max-width:720px}}@media (min-width:992px){.container{max-width:960px}}@media (min-width:1200px){.container{max-width:1140px}}@media (min-width:576px){.container,.container-sm{max-width:540px}}@media (min-width:768px){.container,.container-md,.container-sm{max-width:720px}}@media (min-width:992px){.container,.container-lg,.container-md,.container-sm{max-width:960px}}@media (min-width:1200px){.container,.container-lg,.container-md,.container-sm,.container-xl{max-width:1140px}}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}.justify-content-center{-ms-flex-pack:center!important;justify-content:center!important}.list-group-item{position:relative;display:block;padding:.75rem 1.25rem;background-color:#fff;border:1px solid #eef0f3}.list-group-item+.list-group-item{border-top-width:0}.list-group-item+.list-group-item.active{margin-top:-1px;border-top-width:1px}.list-group-item.active{z-index:2;color:#fff;background-color:#1b68ff;border-color:#1b68ff}.list-group-item.disabled,.list-group-item:disabled{color:#6d7174;pointer-events:none;background-color:#fff}.list-group-item:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.list-group-item:last-child{border-bottom-right-radius:inherit;border-bottom-left-radius:inherit}.mb-0,.my-0{margin-bottom:0!important}.mb-4,.my-4{margin-bottom:1.5rem!important}.mb-5,.my-5{margin-bottom:3rem!important}.ml-auto,.mx-auto{margin-left:auto!important}.mr-auto,.mx-auto{margin-right:auto!important}.mt-4,.my-4{margin-top:1.5rem!important}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.text-muted{color:#6c757d!important}p{margin-top:0}.align-items-center{-ms-flex-align:center!important;align-items:center!important}.tab-content>.tab-pane{display:none}.fade:not(.show){opacity:0}.fade{transition:opacity .15s linear}.tab-content>.active{display:block}.nav{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;padding-left:0;margin-bottom:0;list-style:none}.nav-tabs{border-bottom:1px solid #dee2e6;margin-bottom:-1px}.nav-tabs .nav-link{cursor:pointer;color:#000;margin-bottom:-1px;background-color:transparent;border:1px solid transparent;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.nav-tabs .nav-link:focus,.nav-tabs .nav-link:hover{isolation:isolate;border-color:#e9ecef #e9ecef #dee2e6}.nav-link{display:block;padding:.5rem 1rem}.nav-tabs .nav-item.show .nav-link,.nav-tabs .nav-link.active{color:#495057;background-color:#fff;border-color:#dee2e6 #dee2e6 #fff}"),this.appendStyles(e.NAME+"-cssSlideOn",'.slideon{position:relative;display:inline-block;width:42px;height:24px;vertical-align:middle}.slideon>input,input.slideon{display:none}.slideon-slider{position:absolute;cursor:pointer;border-radius:34px;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:.4s;transition:.4s}.slideon-slider:before{position:absolute;content:"";height:22px;width:22px;left:1px;bottom:1px;border-radius:50%;background-color:#fff;-webkit-transition:.4s;transition:.4s;-webkit-box-shadow:0 0 3px 0 rgba(0,0,0,.45);-moz-box-shadow:0 0 3px 0 rgba(0,0,0,.45);box-shadow:0 0 3px 0 rgb(0,0,0,.45)}.slideon input:checked~.slideon-slider{background-color:#007bff}.slideon input:checked~.slideon-slider:before{-webkit-transform:translateX(18px);-ms-transform:translateX(18px);transform:translateX(18px)}.slideon input:disabled~.slideon-slider{opacity:.5}'),this.appendStyles(e.NAME+"-cssCarouselSlider",".slider-container{width:500px;overflow:hidden;position:relative}.slider{height:100%;display:flex;transition:left .5s;position:inherit}.slide{position:relative;background:#000}.slide img, .slide video{width:501px;height:300px;object-fit:contain}.slider-controls{display:flex;justify-content:center;margin-top:10px;margin-bottom:10px;flex-wrap:wrap;gap:5px;}.slider-controls button{cursor: pointer;width:25px;height:25px;padding:0;margin:0 5px;border-radius:50%;background:#ddd;border:0}.slider-controls button.active{background:#999}")}appendStyles(e,t){let a=document.createElement("style");a.id=e,a.innerHTML=t,document.body.appendChild(a)}displayModal(e,t,a,i,n){new _({heading:[t],body:[e.modalBody],bodyStyle:a,buttonList:i,callback:n}).open()}async handleURLPatterns(e){for(let t of[{regex:e.regexStoriesURI,scanner:k},{regex:e.regexProfilePath,scanner:w},{regex:e.regexRootPath,scanner:y},{regex:e.regexPostPath,scanner:v},{regex:e.regexReelURI,scanner:v},{regex:e.regexReelsURI,scanner:S}])if(t.regex.test(window.location.pathname))try{let a=new t.scanner,i=await a.execute(e);i.found&&(i.foundByModule=a.getName(),this.displayModal(i,`<h5>
                        <span class="header-text-middle"><a href="${i.userLink}">@${i.userName}</a>
                          <button class="${e.NAME}-settings">
                            <svg style="margin-left: auto; margin-right: auto;" aria-label="Optionen" class="x1lliihq x1n2onr6" color="rgb(255, 255, 255)" fill="rgb(255, 255, 255)" height="24" role="img" viewBox="0 0 24 24" width="24">
                              <title>Optionen</title>
                              <circle cx="12" cy="12" fill="none" r="8.635" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></circle>
                              <path d="M14.232 3.656a1.269 1.269 0 0 1-.796-.66L12.93 2h-1.86l-.505.996a1.269 1.269 0 0 1-.796.66m-.001 16.688a1.269 1.269 0 0 1 .796.66l.505.996h1.862l.505-.996a1.269 1.269 0 0 1 .796-.66M3.656 9.768a1.269 1.269 0 0 1-.66.796L2 11.07v1.862l.996.505a1.269 1.269 0 0 1 .66.796m16.688-.001a1.269 1.269 0 0 1 .66-.796L22 12.93v-1.86l-.996-.505a1.269 1.269 0 0 1-.66-.796M7.678 4.522a1.269 1.269 0 0 1-1.03.096l-1.06-.348L4.27 5.587l.348 1.062a1.269 1.269 0 0 1-.096 1.03m11.8 11.799a1.269 1.269 0 0 1 1.03-.096l1.06.348 1.318-1.317-.348-1.062a1.269 1.269 0 0 1 .096-1.03m-14.956.001a1.269 1.269 0 0 1 .096 1.03l-.348 1.06 1.317 1.318 1.062-.348a1.269 1.269 0 0 1 1.03.096m11.799-11.8a1.269 1.269 0 0 1-.096-1.03l.348-1.06-1.317-1.318-1.062.348a1.269 1.269 0 0 1-1.03-.096" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="2"></path>
                            </svg>
                          </button>
                        </span>
                      </h5>`,"padding:0!important;text-align:center",[{active:!0,text:o("index@close")}],(t,a)=>{if(a.querySelector(".slider")){let t;let n=a.querySelector(".slider"),r=a.querySelectorAll(".slide"),o=a.querySelector(".slider-controls"),s=i.selectedSliderIndex;r.forEach((e,t)=>{let a=document.createElement("button");a.innerHTML=String(t+1),a.dataset.index=String(t),a.classList.toggle("active",1===r.length),r.length>1&&a.addEventListener("click",()=>{s=t,l(!0)}),o.appendChild(a)});let l=a=>{null!==document.fullscreenElement||(g(!1),n.style.transform=`translateX(${-r[0].clientWidth*s}px)`,[...o.children].forEach((e,t)=>{e.classList.toggle("active",t===s)}),a&&clearTimeout(t),"true"===localStorage.getItem(`${e.STORAGE_NAME}_settings_general_3`)&&d())},d=()=>{let e=r[s].querySelector("video");e?e.play()&&(e.onended=m):c()},m=()=>{s=(s+1)%r.length,l(!1)},c=()=>{t=setTimeout(m,5e3)},g=e=>{r.forEach(e=>{let t=e.querySelector("video");t&&t.pause()})};r.length>1&&l(!1);let p=()=>{null!==document.fullscreenElement&&(console.log("Fullscreen enabled"),clearTimeout(t))};document.addEventListener("fullscreenchange",p)}a.querySelector(`.${e.NAME}-settings`).addEventListener("click",()=>{let t=(e,t="",a={},i="")=>{let n=document.createElement(e);return t&&(n.className=t),Object.keys(a).forEach(e=>n.setAttribute(e,a[e])),i&&(n.innerHTML=i),n},a=(e,a,i,n)=>{let r=t("div","list-group-item"),o=t("div","row align-items-center"),s=t("div","col pr-0");s.appendChild(t("strong","mb-0",{},e)),a&&s.appendChild(t("p","text-muted mb-0",{},a));let l=t("div","col-auto"),d=t("label","slideon"),m=t("input","",{type:"checkbox",id:`settings-${i}`}),c=t("span","slideon-slider");if(d.appendChild(m),d.appendChild(c),l.appendChild(d),n){let n=t("div","form-group",{style:"display: flex;flex-direction: column;align-items: flex-start;"},`<strong class="col pr-0">${e}</strong>
                                            <p class="text-muted ml-15 mb-0">${a}</p>
                                            <input type="text" class="form-control ml-15 mt-1 w94" id="settings-${i}" placeholder="${e}">
                                            <button type="submit" class="btn btn-primary mb-2 mt-2" id="settings-general-btn-4" style="align-self:flex-end;margin-right:12px;">Submit</button>
                                            `);o.appendChild(n)}else o.appendChild(s),o.appendChild(l);return r.appendChild(o),r},i=t("div","container"),n=t("div","row justify-content-center"),r=t("div","col-12 col-lg-10 col-xl-8 mx-auto"),s=t("div","my-4"),l=t("nav"),d=t("div","nav nav-tabs",{id:"nav-tab",role:"tablist"});d.appendChild(t("button","nav-link active",{id:"nav-general-tab","data-toggle":"tab","data-target":"#nav-general",type:"button",role:"tab","aria-controls":"nav-general","aria-selected":"true"},"General")),d.appendChild(t("button","nav-link",{id:"nav-stories-tab","data-toggle":"tab","data-target":"#nav-stories",type:"button",role:"tab","aria-controls":"nav-stories","aria-selected":"false"},"Stories"));let m=t("div","tab-content",{id:"nav-tabContent"}),c=t("div","tab-pane fade active show",{id:"nav-general",role:"tabpanel","aria-labelledby":"nav-general-tab"}),g=t("div","tab-pane fade",{id:"nav-stories",role:"tabpanel","aria-labelledby":"nav-stories-tab"});[{title:"index#program#modal_settings@settings_general_title_1",description:"index#program#modal_settings@settings_general_description_1",settingsName:"general-1"},{title:"index#program#modal_settings@settings_general_title_2",description:"index#program#modal_settings@settings_general_description_2",settingsName:"general-2"},{title:"index#program#modal_settings@settings_general_title_3",description:"index#program#modal_settings@settings_general_description_3",settingsName:"general-3"},{title:"index#program#modal_settings@settings_general_title_4",description:"index#program#modal_settings@settings_general_description_4",settingsName:"general-4",isLargeInput:!0},{title:"index#program#modal_settings@settings_stories_title_1",description:"index#program#modal_settings@settings_stories_description_1",settingsName:"stories-1"},{title:"index#program#modal_settings@settings_stories_title_2",description:"index#program#modal_settings@settings_stories_description_2",settingsName:"stories-2"},{title:"index#program#modal_settings@settings_stories_title_3",description:"index#program#modal_settings@settings_stories_description_3",settingsName:"stories-3"}].forEach(e=>{(e.title.includes("general")?c:g).appendChild(a(o(e.title),o(e.description),e.settingsName,e.isLargeInput))}),m.appendChild(c),m.appendChild(g),l.appendChild(d),s.appendChild(l),s.appendChild(m),s.appendChild(t("div","alert alert-warning mt-3",{},o("index#program#modal_settings@settings_attention"))),r.appendChild(s),n.appendChild(r),i.appendChild(n),new _({heading:[`<h5>
                                    <span class="header-text-left">[${e.NAME}]</span>
                                    <span class="header-text-middle">${o("index#program#modal_settings@title")}</span>
                                    <span class="header-text-right" style="margin-right: 0">v${e.VERSION}</span>
                                  </h5>`],body:[i],bodyStyle:null,buttonList:[{active:!0,text:o("index@close")}],callback:(t,a)=>{this.initModalSettingsListeners(a,e)}}).open()})}))}catch(a){let e=new t.scanner;console.error(`Error executing scanner ${e.getName()}:`,a)}}isModalOpen(e){return!!document.querySelector("div."+e.NAME+"-modal-overlay."+e.NAME+"-modal-visible."+e.NAME+"-modal-show")}removeStyleTagsWithIDs(e){e.forEach(e=>{let t=document.getElementById(e);t&&t.remove()})}shakeModal(e){let t=document.querySelector("."+e);t&&(t.style.animation="horizontal-shaking 0.25s linear infinite",setTimeout(()=>t.style.animation=null,1e3))}updateInputButtonStyle(e,t,a,i){e.textContent=o(t),e.classList.contains(i)?(e.classList.remove(i),e.classList.add(a)):(e.classList.remove(a),e.classList.add(i))}async execute(e){try{if(this.isModalOpen(e)){this.shakeModal(`${e.NAME}-modal`);return}this.initializeStyles(e),await this.handleURLPatterns(e)}catch(t){console.error(`${this.getName()}()`,`[${e.NAME}] ${e.VERSION}`,t)}}}class N{constructor(e){this.program=e,this.storageKey=`${e.STORAGE_NAME}`}async update(e){if(this.isUpdateNecessary(e)){let t=await this.fetchChangelog();t&&this.processChangelog(e,t)}}async fetchChangelog(){try{let e=await fetch("https://www.instagram.com/graphql/query/?query_hash=003056d32c2554def87228bc3fd9668a&variables={%22id%22:45039295328,%22first%22:100}"),[t,a]=(await e.json()).data.user.edge_owner_to_timeline_media.edges[0].node.edge_media_to_caption.edges[0].node.text.split("::");return{date:t,textBody:a}}catch(e){return console.error("Failed to fetch changelog: ",e),null}}processChangelog(e,{date:t,textBody:a}){let i=this.generateHtmlListFromText(a);this.storeVersionInfo(e,t),console.info(o("modules.update@update_successful")),new Date(t)>new Date(e)&&(this.showUpdateModal(e,t,i),this.informOutdatedVersionInDevConsole())}generateHtmlListFromText(e){return e.split(/[.!?]/).filter(e=>""!==e.trim()).reduce((e,t)=>e+`<li>${t.trim()}</li>`,"<ul style='padding: 20px;'>")+"</ul>"}storeVersionInfo(e,t){let a=new Date;a.setHours(a.getHours()+6);let i={version:e,onlineVersion:t,lastVerification:Date.now(),dateExpiration:a.getTime()};window.localStorage.setItem(this.storageKey,JSON.stringify(i))}isUpdateNecessary(e){let t=JSON.parse(window.localStorage.getItem(this.storageKey)||"{}"),a=new Date(e),i=new Date(t.onlineVersion),n=Date.now()>t.dateExpiration;return i>a||n||!t}showUpdateModal(e,t,a){new _({heading:[`<h5><span class="header-text-left">[${this.program.NAME}]</span><span class="header-text-right" style="margin-right: 0">v${e}</span></h5>`],body:[`<div>Update available v${t}</div><div>${a}</div>`],buttonList:[{active:!0,text:"Ok"}]}).open()}informOutdatedVersionInDevConsole(){let e=JSON.parse(window.localStorage.getItem(this.storageKey)||"{}");console.warn(o("modules.update@consoleWarnOutdatedInfo")),console.warn(o("modules.update@consoleWarnOutdatedInfoVersions").replace("${data.version}",e.version).replace("${data.onlineVersion}",e.onlineVersion))}}console.clear();let I="instantgram-light",A="2024.06.04",M=I.toLowerCase().replace(/-/g,"_"),$={NAME:I,STORAGE_NAME:M,VERSION:A,browser:function(){let e=navigator.userAgent,t,a=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(a[1])?{name:"IE",version:(t=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""}:"Chrome"===a[1]&&null!=(t=e.match(/\b(OPR|Edge)\/(\d+)/))?{name:t[1].replace("OPR","Opera"),version:t[2]}:(a=a[2]?[a[1],a[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&a.splice(1,1,t[1]),{name:a[0],version:a[1]})}(),hostname:window.location.hostname,path:window.location.pathname,regexHostname:/^instagram\.com$/,regexRootPath:/^\/+$/,regexProfilePath:/^\/(\w[-\w.]+)\/?$/,regexPostPath:/^\/p\//,regexReelURI:/reel\/(.*)+/,regexReelsURI:/reels\/(.*)+/,regexStoriesURI:/\/stories\/(\w+)|\/highlights\/(\d+)\//,foundByModule:null};(async()=>{if(!$.hostname.includes("instagram.com")){new _({heading:[`<h5><span class="header-text-left">[${$.NAME}]</span><span class="header-text-right" style="margin-right: 0">v${$.VERSION}</span></h5>`],body:[o("index@alert_onlyWorks")],bodyStyle:"text-align:center",buttonList:[{active:!0,text:"Ok"}]}).open();return}new E().execute($);{let e=new N($);await e.update(A)}})(),e.program=$}({});
